---
layout: post
title: "跨域请求"
date: 2017-11-20
tag: jsonp
---   

#### 更新：博客不再使用这 api, 代码仅供参考

最近想在博客内加入一个随机格言，已经有现成的 api 可以使用，中文用的是`https://v1.hitokoto.cn/?encode=text`，英文用的是`https://api.forismatic.com/api/1.0/?method=getQuote&format=jsonp&lang=en&jsonp=parseQuote`
<br>
**具体代码**（英文的格言涉及跨域请求）
```html
<html>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
中文随机一言：<span id="motto"></span>
<br>
English random motto：<span id="mottoEN"></span>
<script>
    $("#motto").load("https://v1.hitokoto.cn/?encode=text");

    $.ajax({
        url: "https://api.forismatic.com/api/1.0/?method=getQuote&format=jsonp&lang=en&jsonp=parseQuote",
        jsonp: "callback",//传递给请求处理程序或页面的，用以获得 jsonp 回调函数名的参数名(一般默认为:callback)
        jsonpCallback: "parseQuote",//自定义的 jsonp 回调函数名称，默认为 jQuery 自动生成的随机函数名，也可以写"?"，jQuery 会自动为你处理数据
        dataType: "jsonp",
        success: function (response) {
            console.log(response);
            $("#mottoEN").append(response.quoteText);
        }
    });

</script>

</html>
```
**效果**
<br>
![](/images/posts/jsonp/Snipaste_2018-05-07_19-48-45.png)