---
layout: post
title: "Linux 服务器相关（持续更新）"
date: 2017-11-03
tag: [Linux, Redis] 
---   

## 一般操作
- su 最高权限
- apt-get update 更新源
- apt-get upgrade 更新已安装的包

## Linux 的启动过程 / 关机

### 命令问题求助

- man 你不会的命令（常用）
    - **显示说明**    
    - NAME  命令的名称和单行描述
    - SYNOPSIS 怎样使用命令
    - DESCRIPTION 命令功能的深入讨论
    - EXAMPLES  怎样使用命令的例子
    - SEE ALSO  相关主题（通常是手册页）
- 具体命令 - -help
- info 具体命令（了解即可）

### Linux 系统有 7 个运行级别（RunLevel）：常用的是 3 和 5
- 运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动
- 运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登陆
- 运行级别2：多用户状态(没有NFS)，没有网络服务
- 运行级别3：完全的多用户状态(有NFS)，登陆后进入控制台命令行模式
- 运行级别4：系统未使用，保留
- 运行级别5：X11表示控制台，进入图形界面
- 运行级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动

### 启动过程
1. 内核引导
2. 运行 init（如 RunLevel）
3. 系统初始化
4. 建立终端
5. 用户登录

![](/images/posts/linux/Snipaste_2018-05-25_16-40-09.png)

### 关机
- **sync** 将数据由内存同步到硬盘中
- Shutdown –h now 立马关机
- Shutdown –r now 系统立马重启
- reboot 就是重启，等同于 shutdown –r now
- halt 关闭系统，等同于shutdown –h now 和 poweroff


## VI / VIM 编辑器
![](/images/posts/linux/180430082980605.png)








- ### 静态网站部署
    - apt-get install apache2
    - service apache2 restart
    - 在 /etc/apache2/sites-available/000-default.conf 更改默认路径
    
- ### 安装 redis
    - yum install gcc-c++ 安装 gcc
    - cd /opt 进入 opt 文件夹
    - wget http://download.redis.io/releases/redis-4.0.9.tar.gz 下载
    - tar zxvf redis-4.0.9.tar.gz 解压
    - cd redis-4.0.9 进入解压好的文件夹
    - make 编译
    - make install 安装
    - cd /usr/local/bin 安装在了这个目录下
    > 在解压好的目录下 cd /opt/redis-4.0.9 有一个文件 redis.conf
    > 复制到新建文件夹 /myredis 下
    - mkdir myredis 新建文件夹
    - cp /opt/redis-4.0.9/redis.conf /myredis 完成复制
    - vim /myredis/redis.conf 
    > 将 daemonize no 改成 yes(必改)
    > 最新 redis 安装、配置、远程访问发现，需调整 redis.conf 参数有：
    > 1. bind 127.0.0.1 -> #bind 127.0.0.1 
    > 2. protected-mode yes -> protected-mode no<br>上述两个配置仅适用于开发环境，不建议在生产环境做上述配置。 
    
    > 进入 cd /usr/local/bin
    
    - redis-server /myredis/redis.conf 后台启动服务
    - redis-cli -p 6379
    > 至此可以用 ping 指令，如果返回 PONG 则说明成功
    - shutdown 关闭服务
    - ps -ef&#124;grep redis 查看 redis 进程
    
ps: 防火墙内要记得开放 redis 进程的端口
    
